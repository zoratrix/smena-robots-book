---
description: >-
  ВНИМАНИЕ! Все действия с терминалом можно выполнять на компьютере или на
  роботе. Чтобы зайти "в робота", нужно в терминале ввести команду подключения
  по ssh:
---

# Модуль 1. Ввод в эксплуатацию

```
ssh pi@turtlebroXX.local
```

или по ip

```
ssh pi@XXX.XXX.XXX.XXX.local
```

пароль выдан в задании, по умолчанию: brobro

Чтобы узнать ip адрес робота:



**Шаг 1: Распаковка робота и проверка комплектации**

1. **Распаковка**:
   * Открываешь упаковку и аккуратно достаешь робота и все его компоненты.
   * Проверь, чтобы в комплекте были: сам робот, аккумуляторная сборка (и 4 аккумулятора), зарядное устройство, зарядное устройство для аккумуляторов, кабель micro usb и другие элементы, если указано в документации.
2. **Заполнение акта о приеме оборудования**:
   * Открой **Акт о приеме оборудования** и заполни первые два раздела:
     * **Раздел 1**: здесь указываешь текущую дату.
     * **Раздел 2**: оцениваешь, все ли компоненты на месте и не повреждена ли упаковка.
   * Если чего-то не хватает, заполни **Запрос на доукомплектование**. Найди форму запроса и заполни ее, указав, какие элементы отсутствуют. Эту форму нужно будет показать эксперту.

***

**Шаг 2: Настройка подключения робота к сети полигона**

1. **Изменение имени робота**:
   * Подключись к роботу через компьютер (Wi-Fi или USB).
   * Имя по умолчанию — `turtlebro9X`. Нам нужно поменять его на `turtlebroXX`, где XX — номер робота на наклейке.
   *   Открой терминал и выполни команду:

       ```bash
       hostnamectl set-hostname turtlebroXX
       ```

       Проверь, что имя изменилось, с помощью команды:

       ```bash
       hostnamectl status
       ```
2. **Подключение к сети полигона**:
   * Используй кардридер и подключи SD-карту робота к компьютеру.
   * Найди файл настроек сети (обычно это `wpa_supplicant.conf`), открой его и введи данные для подключения к роутеру полигона (SSID и пароль).
   * Верни карту в робота и включи его. Проверь подключение.

***

**Шаг 3: Проверка базовой информации о роботе**

Теперь давай соберем основную информацию о роботе и заполним **Инструкцию по вводу робота в эксплуатацию**.

Все эти команды выполняются <mark style="background-color:purple;">в роботе</mark>!

1. **Название дистрибутива Linux**:
   *   Открой терминал и выполни команду:

       ```bash
       lsb_release -a
       ```

       В поле "Distributor ID" будет указано название дистрибутива (например, Ubuntu).
2. **Кодовое имя сборки Linux**:
   * Эта же команда (`lsb_release -a`) покажет кодовое имя сборки (например, "focal").
3. **Версия интерпретатора Python3**:
   *   Чтобы узнать версию Python, выполни команду:

       ```bash
       python3 --version
       ```
4. **Версия библиотеки rospy**:
   *   Выполни команду, чтобы узнать версию библиотеки ROS для Python:

       ```bash
       pip3 show rospy
       ```
5. **Температура процессора**:
   *   Для проверки температуры процессора введи команду:

       ```bash
       vcgencmd measure_temp
       ```
6. **Версия пакета turtlebro**:
   *   Узнай версию пакета turtlebro через команду:

       ```bash
       rosversion turtlebro
       ```
7. **Серийный номер системной платы (mcu\_id)**:
   *   Для получения серийного номера платы робота используй команду:

       ```bash
       cat /proc/cpuinfo | grep Serial
       ```
8. **Размер оперативной памяти**:
   *   Узнать размер оперативной памяти можно с помощью команды:

       ```bash
       free -m
       ```
9. **Список запущенных топиков ROS**:
   *   Выполни команду:

       ```bash
       rostopic list
       ```

       Сравни список с данными из онлайн-инструкции к роботу, чтобы убедиться, что все топики есть (в реальности на роботе может быть больше, но главное не меньше, чем в инструкции). Если меньше, то нужно записать, каких не хватает.

***

**Шаг 4: Проверка камеры**

1. **Работоспособность камеры**:
   *   Запусти инструмент для просмотра видео с камеры:

       ```bash
       rqt_image_view
       ```
   * Убедись, что изображение с камеры выводится без проблем.
2. **Максимальное разрешение камеры**:
   *   Чтобы узнать разрешение камеры, выполни команду:

       ```bash
       v4l2-ctl --list-formats-ext
       ```

***

**Шаг 5: Проверка аккумулятора**

1. **Получение напряжения батареи через топик**:
   *   Для получения текущего напряжения батареи используй команду:

       ```bash
       rostopic echo /bat
       ```
2. **Измерение напряжения мультиметром**:
   * **Обязательно выключи робота** перед измерением.
   * Подключи мультиметр к выводам аккумулятора и измерь напряжение. Сравни это значение с тем, что ты получил через топик. Запиши результат в акт

***

**Шаг 6: Проверка микроконтроллера Atmega**

1. **Загрузка тестовой прошивки**:
   * Зайди на [репозиторий GitHub](https://github.com/voltbro/ws-sro) и скачай необходимые файлы.
   * Открой Arduino IDE и установи библиотеку FastLed через менеджер библиотек.
   * Загрузи прошивку **Turtlebro-tester** на микроконтроллер.
2. **Проверка светодиодов и кнопок**:
   * Убедись, что светодиодная лента и кнопки D22-D25 работают корректно.
3. **Загрузка ROS-прошивки**:
   * Для загрузки прошивки, содержащей ROS-ноду, нужно установить библиотеку `ros_lib` через менеджер библиотек в Arduino IDE.
   * Скомпилируй и загрузи прошивку **TB-ros-tester**.
4. **Проверка связи с ROS**:
   * Проверь, что микроконтроллер корректно взаимодействует с ROS. Убедись, что все компоненты работают, и данные отправляются правильно.

<details>

<summary>Подробнее про проверку связи с ROS:</summary>

#### Шаги для проверки взаимодействия микроконтроллера Atmega с ROS:

1. **Подключение микроконтроллера к компьютеру:**
   * Убедись, что микроконтроллер Atmega подключен к компьютеру или к роботу через USB или другой интерфейс связи.
   * Запусти Arduino IDE, и убедись, что ты загрузила на микроконтроллер прошивку **TB-ros-tester**, которая включает ROS-ноду.
2. **Запуск ROS Master на компьютере:**
   *   Открой терминал на компьютере, к которому подключен микроконтроллер, и запусти ROS Master:

       ```bash
       roscore
       ```
3. **Запуск ноды микроконтроллера:**
   * В зависимости от конфигурации прошивки **TB-ros-tester**, микроконтроллер должен автоматически запускать ROS-ноду, как только ты загрузила его.
   *   Проверь, что нода действительно запущена, с помощью команды:

       ```bash
       rosnode list
       ```

       Ты должна увидеть ноду, которая связана с микроконтроллером, в списке нод. Название ноды может быть что-то вроде `/atmega_node` или то, что указано в прошивке.
4. **Проверка топиков:**
   *   Чтобы убедиться, что микроконтроллер отправляет и получает данные через ROS-топики, можно выполнить команду:

       ```bash
       rostopic list
       ```

       Ты должна увидеть топики, относящиеся к работе микроконтроллера. Например, могут быть топики для данных с датчиков, состояния кнопок, управления светодиодами и так далее.
5. **Просмотр данных из топиков:**
   *   Чтобы проверить, что микроконтроллер отправляет корректные данные, можно посмотреть, что приходит в соответствующие топики. Например, если есть топик для кнопок, ты можешь выполнить команду:

       ```bash
       rostopic echo /button_state
       ```

       Это покажет текущие состояния кнопок. Если данные корректно отображаются, это означает, что микроконтроллер взаимодействует с ROS.
6. **Тестирование команд для управления микроконтроллером:**
   *   Если прошивка поддерживает отправку команд микроконтроллеру, можно протестировать отправку сообщений в топики, на которые микроконтроллер подписан. Например, если ты можешь управлять светодиодами через ROS, отправь команду:

       ```bash
       rostopic pub /led_command std_msgs/Bool "data: true"
       ```

       Эта команда должна включить светодиоды на микроконтроллере, если взаимодействие работает корректно.

</details>



***

**Шаг 7: Принятие решения**

Когда все шаги будут выполнены, вернись к **Акту о приеме оборудования** и заполни **Раздел 3**, указав все технические характеристики робота.

На основе всех собранных данных и проверок, реши, подходит ли робот для эксплуатации. Если всё в порядке, подтверди приём. Если что-то не соответствует, заполни запрос на доукомплектование или замену оборудования.
