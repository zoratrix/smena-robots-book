# Модуль 3. Эксплуатация робота

1. Нужно построить карту полигона и сохранить ее на робота
   1. В виртуальной машине в терминале заходим в робота (см модуль 1 как это сделать)
   2. Вводим: `roslaunch turtlebro_navigation turtlebro_slam_navigation.launch`
   3. Эта команда запускает на роботе программу для навигации и построения карты
   4. Далее открываем еще окно терминала, не заходя в робота вводим команду `rviz`
   5. Эта команда открывает в виртуальной машине программу для визцализации. Теперь нужно настроить, что отображать
   6. Нажмем Add, выберем вкладку By topic, выбрать источник данных /scan/LaserScan&#x20;
   7. Изменить Fixed Frame на вкладке Global Option указав точку отсчета - базу робота base\_footprint&#x20;
   8. Добавим отображение карты Add->By Topic->/map->Map
   9. После того как мы вывели все необходимое в программе, нужно построить карту
   10. Для этого откроем веб-интерфейс (как это сделать см модуль 1). В открытом веб-интерфейсе нажимайте WASD чтобы проехать по всему полигону и построить полную карту
   11. Для того, чтобы сохранить построенную карту, нужно на роботе выполнить команду (map = название файла): `rosrun map_server map_saver -f map`\
       После выполнения данной команды, будет создано два файла map.yaml и map.pgm \
       В файле map.yaml находятся параметры карты. \
       В map.pgm - собственно изображение карты
2. Запустить робота на полигоне для отработки задачи патрулирования.
   1. Запустить VS Code на ноутбуке. Подключиться к роботу
   2.

       <figure><img src="../../../.gitbook/assets/image (35).png" alt=""><figcaption></figcaption></figure>
   3. ![](<../../../.gitbook/assets/image (36).png>)
   4. Поставить робота в начальную позицию.
   5. Сбросить текущее положение (кнопка сброс одометрии на веб интерфейсе)
   6. Используя веб-интерфейс, найти на полигоне координаты стольких точек, сколько считаете нужным. Все координаты записать на листочек в таблицу
   7. Далее внести координаты в файл: \
      `~home/catkin_ws/src/turtlebro_extra/turtlebro_patrol/data/goals.toml`
   8. Далее для запуска патрулирования сначала установить робота на старт, сбросить текущее положение
   9. Команды для запуска, остановки, сброса патрулирования смотрите в файле:\
      `~home/catkin_ws/src/turtlebro_extra/turtlebro_patrol/README`

