# Настройка рабочего места

## настройка рабочих мест ЭСР

### НАСТРОЙКА ПУТЕЙ

1. Узнать ip ноутбука, для этого открыть терминал, ввести:

```bash
ifconfig
```

Записать ip (вида 192.168.12.XX)\
2\. Включить робота (в розетку), подождать \~1 мин\
3\. Убедиться, что робот загрузился, для этого зайти в браузер, ввести в адресной строке:

```bash
turtlebroXX:1880 или turtlebroXX.local:1880
```

Если загрузился веб-интерфейс, значит все ок\
4\. Узнать ip робота, для этого:

* зайти в робота, то есть открыть терминал, ввести

```bash
ssh pi@turtlebroXX.local
```

* когда попросит пароль, ввести `brobro` (пароль не отображается при вводе)
* если задаст вопрос и в конце (Y/n?), ввести `y`
* если успешно зашли в робота, начало строки в терминале изменится на `pi@turtlebroXX`
* в терминале "в роботе" ввести `ifconfig`
* Записать ip

5. Открыть новую вкладку терминала ("внутри ноута"), в ней ввести

```bash
nano ~/.bashrc
```

Внутри терминала откроется текстовый файл, прокрутить стрелками в низ файла, там написать следующее:

```bash
export ROS_MASTER_URI=http://<IP-адрес робота>:11311/
export ROS_HOSTNAME=<IP-адрес компьютера>
```

Чтобы сохранить нажать ctrl+o, затем нажать enter (подтвердить имя файла), затем для выхода нажать ctrl+x\
6\. Вернуться во вкладку терминала "внутри робота" (или зайти в него в новой вкладке снова, см пункт 4). В роботе ввести

```bash
nano ~/.bashrc
```

Внутри терминала откроется текстовый файл, прокрутить стрелками в низ файла, там написать следующее:

```bash
export ROS_MASTER_URI=http://localhost:11311/
export ROS_HOSTNAME=<IP-адрес робота>
```

Чтобы сохранить нажать ctrl+o, затем нажать enter (подтвердить имя файла), затем для выхода нажать ctrl+x

## УСТАНОВКА ROS НА НОУТБУКЕ

1. проверить не установлен ли ROS, для этого ввести в терминале

```bash
roscore
```

Если ROS установлен, будет примерно такое сообщение:

\
\
2\. Если не установлен, делаем следующее:

<figure><img src="../../.gitbook/assets/image (27).png" alt=""><figcaption></figcaption></figure>

#### Добавление репозитория пакетов ROS

Открываем окно терминала (программа terminal) (возможно Ctrl-Alt-T)

```bash
sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" > /etc/apt/sources.list.d/ros-latest.list'
```

#### Добавление ключей

```bash
sudo apt-key adv --keyserver 'hkp://keyserver.ubuntu.com:80' --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
```

и на всякий случай еще это:

```bash
sudo apt install curl
```

затем

```bash
curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add -
```

#### Обновление списка пакетов

Когда мы добавили и настроили репозиторий с пакетами ROS, мы должны обновить список пакетов доступных системе для установки. Также рекомендуется обновить все установленные пакеты Ubuntu до установки ROS.

```bash
sudo apt-get update && sudo apt-get upgrade -y
```

#### Установка пакетов ROS

На этапе знакомства с ROS, проще всего установить самую полную версию системы. Данный пакет автоматический установит все основные пакеты ROS, rqt, rviz, библиотеки 2D/3D симуляции, навигации и тп.

```bash
sudo apt install ros-noetic-desktop-full
```

готово. после этого:

#### Установка rosdep

Прежде чем использовать ROS, вам необходимо инициализировать `rosdep`. `rosdep` позволяет устанавливать системные зависимости для исходных кодов, который вы хотите скомпилировать и требуется для запуска некоторых основных компонентов в ROS.

```bash
sudo rosdep init
затем
rosdep update
```

Добавим переменные окружения ROS, для их автоматической установки при запуске bash:

```bash
echo "source /opt/ros/noetic/setup.bash" >> ~/.bashrc
source ~/.bashrc
```

Если вы собираетесь самостоятельно разрабатывать или вносить изменения в пакеты, вам необходимо установить дополнительные пакеты.

```bash
sudo apt-get install python3-rosinstall python3-rosinstall-generator python3-wstool build-essential
```

Проверить установился ли ROS, для этого ввести в терминале

```bash
roscore
```

После этого проверить rviz

```
rviz
```

