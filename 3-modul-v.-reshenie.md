# 3 Модуль В. Решение

Алгоритм выполнения задания:

1. Найти точки: запустить веб-интерфейс, привести робота в каждую необходимую точку, записать их координаты
2. Внести точки в файл goals.toml
3. Запустить Rviz и вывести все нужное для отображения
4. Запустить патрулирование

{% hint style="info" %}
Чтобы зайти на веб-интерфейс введите в адресной строке `turtlebroXX.local:8080`
{% endhint %}

1. Найти все точки:
   1. Поставьте робота в начальное положение и на веб-интерфейсе нажмите кнопку "Сбросить одометрию"
   2. используя кнопки wasd управляйте роботом. Приведите робота в каждую необходимую точку. В каждой точке робот должен быть повернут на **следующую** точку. Запишите координаты каждой точки (Х, У, theta) в таблицу на листок бумаги. Стартовую точку можно не записывать - ее координаты нулевые
2. Внесение точек в файл goals.toml
   1. Нужный файл лежит в роботе по такому адресу: `~home/catkin_ws/src/turtlebro_extra/turtlebro_patrol/data/goals.toml`
   2. &#x20;Чтобы зайти в этот файл, откройте VSCode, подключитесь к роботу и через проводник найдите нужный файл. Еще один способ - зайти на веб-интерфейс робота, в верхней части экрана нажать кнопку VSCode, ввести пароль от робота и вы получите тот же самый VSCode, что на ноуте
   3. Внесите все точки по примеру, затем **сохраните файл** (ctrl+s)
3. Запуск навигации
   1. В терминале зайдите в робота и введите команду: `roslaunch turtlebro_navigation turtlebro_slam_navigation.launch`
   2. Эта команда запускает на роботе программу для навигации и построения карты
   3. Далее открываем еще окно терминала, не заходя в робота вводим команду `rviz`
   4. Эта команда открывает в виртуальной машине программу для визцализации. Теперь нужно настроить, что отображать
   5. Нажмем Add, выберем вкладку By topic, выбрать источник данных /scan/LaserScan&#x20;
   6. Изменить Fixed Frame на вкладке Global Option указав точку отсчета - базу робота base\_footprint&#x20;
   7. Добавим отображение карты Add->By Topic->/map->Map
   8. Добавим так же модуль робота Add-> Robot model
4. Запуск патрулирования
   1. Поставьте робота в начальную точку
   2. Нажмите кнопку "сбросить одометрию" на веб интерфейсе ИЛИ введите в терминале на роботе rosservice call /reset
   3. Команды для запуска, остановки, сброса патрулирования смотрите в файле:\
      `~home/catkin_ws/src/turtlebro_extra/turtlebro_patrol/README`
